\chapter{Categories and Functors}
\label{chapter__category_theory}
\section{Categories}

In mathematics, it is common to study maps between objects.
Continuous functions between topological spaces, linear maps between vector spaces \etc\
Categories create a framework for this type of mathematical structure.

\begin{definition}{Category \cite[Section~1.2]{Roman2017}}{}
A category $\C$ consists of
\begin{enumerate}
    \item \textbf{Objects}: $\ob(\C)$, which is a class\footnote{A class is a collection of mathematical objects.}. \Ie\ it need not be a proper set.
    
    \item \textbf{Morphisms}: For every $A, B \in \ob(\C)$ we have a set $\mor_\C(A,B)$. An element $f \in \mor_\C(A,B)$ is called a morphism from $A$ to $B$, and we often write 
    $$
    f: A \to B,
    $$
    even though $f$ is not always a map. Furthermore, $\mor_\C(A,B)$ and $\mor_\C(C,D)$ are disjoint unless $A = C$ and $B = D$.
    
    \item \textbf{Composition}: For every $f \in \mor_\C(A,B)$ and $g \in \mor_\C(B,C)$ there exists a $g \circ f \in \mor_\C(A,C)$ called the composition of $g$ after $f$ and the composition needs to be associative: 
    $$
    f \circ (g \circ h) = (f \circ g) \circ h.
    $$

    \item \textbf{Identity}: For each object $A,B \in \ob(\C)$ there exists a morphism $e_A \in \mor_C(A,A)$ such that for $f \in \mor_C(A,B)$ and $g \in \mor_C(B,A)$ we have
    $$
    f \circ e_A = f \quad \text{and} \quad e_A \circ g = g.
    $$
\end{enumerate}
\end{definition}

One reason why the objects $\ob(\C)$ of a category are not generally set is that sets require the axiom of regularity. 
Disallowing such things as \emph{the set of all sets}. Particularly classes can be much larger than sets \source[cite this, russel].

Nonetheless, we will often define the class of objects using the following notation:
$$
\ob(\C) = \{A: \text{$A$ fulfills some condition}\}
$$
where it is understood that this is not a proper set.


In the definition of a category we never required any morphisms other than the identity morphism to exist.
This means that we could construct a category with arbitrary objects and only the identity morphism for each object. 
Such a category would however not be very interesting to study.
On the other hand it is common to study categories where certain objects have no morphisms between them.

\subsection{Examples}

Interestingly we can encode many mathematical structures as categories even some, where it is not immediately obvious that they form a category.

The most familiar way of thinking about a category is to see morphisms as maps and the composition as the composition of maps. There are many example of such categories.

\begin{example}{Category of Sets \source[?]}{}
Consider the category $\mathrm{Set}$ consisting of
\begin{itemize}
    \item $\ob(\mathrm{Set}) := \{X: \text{$X$ is a set}\}$
    \item $\mor_{\mathrm{Set}}(X,Y) := \{f: X \to Y: \text{$f$ is a map}\}$
\end{itemize}
In this case composition is simply the composition of maps and the identity is given by the identity map $\id_A: x \in A \mapsto x \in A$.
\end{example}

Instead of taking arbitrary sets and maps between them, we can also study categories where the objects have additional structure and the morphisms preserve that structure.

\begin{example}{Topological Spaces \source[?]}{}
Similar to the previous category we can define $\mathrm{Top}$ with
\begin{itemize}
    \item $\ob(\mathrm{Top}) := \{(X,\tau) : \text{$X$ a set and $\tau$ a topology}\}$
    \item $\mor_{\mathrm{Top}}(X,Y) := \{f: X \to Y: \text{$f$ is continuous}\}$
\end{itemize}
and the usual composition of maps and identity function. The reason this is in fact a category is that the composition of continuous maps is still continuous.

Similarly, we can define the category of \emph{based topological} spaces $\mathrm{Top}_\bullet$. In this case objects are tuples $(X,x_0)$ with $x_0 \in X$ and morphisms are called \emph{based maps} which are continuous maps $f: (X,x_0) \to (Y,y_0)$ such that $f(x_0) = y_0$.
\end{example}

\begin{example}{Vector Spaces}{}
Let $\mathbb{K}$ be a field. Another structure that one might want to study is that of $\mathrm{Vec}_\mathbb{K}$ where
\begin{itemize}
    \item $\ob(\mathrm{Vec}_\mathbb{K}) := \{V : \text{$V$ is a vector space over $\mathbb{K}$}\}$
    \item $\mor_{\mathrm{Vec}_\mathbb{K}}(V,W) := \{f: V \to W : \text{$f$ is a $\mathbb{K}$-linear map}\}$
\end{itemize}
then this is again a category for same reasons as in the previous example.
\end{example}
These examples are perhaps the first categories one encounters in mathematics. 

We can also consider categories whose morphisms are not maps. In this case it is important to be clear what the composition $\circ$ should be.

\begin{example}{Category of Ordering}{}
Consider the category $\mathrm{Ord}_\R$ with
\begin{itemize}
    \item $\ob(\mathrm{Ord}_\R) := \R$
    \item $\mor_{\mathrm{Ord}_\R}(a,b) := \begin{cases}
        \{(a,b)\} & \text{if $a \ge b$} \\
        \hfil \emptyset & \text{else}
    \end{cases}$
\end{itemize}
and the composition $(a,b) \circ (b,c) := (a,c)$ if $a \ge b \ge c$ and identity $(a,a)$.

Notice how this category encodes the full information of the total ordering $\ge$ on $\R$. Particularly the composition $\circ$ encodes transitivity and the identity encodes reflexivity.
\end{example}

\begin{example}{Group as a Category}{group-category}
Let $G$ be a group then we can define a corresponding category $\mathcal{G}$ where
\begin{itemize}
    \item $\ob(\mathcal{G}) := \{\epsilon\}$ is a single element
    \item $\mor_{\mathcal{G}}(\epsilon,\epsilon) := G$
\end{itemize}
and the composition is given by $g \circ h = gh$ and identity by $e \in G$.
\end{example}
In the previous two examples it might not be intuitive why these compositions form a category. It is however a good exercise to verify that they do.

\section{Functors}
We would now like to study maps between categories. It is not yet clear what such a map is supposed to look like and what properties it must have.

\begin{definition}{Functor \cite[Section~1.3]{Roman2017}}{}
We differentiate between \emph{covariant} and \emph{contravariant} \emph{functors}. 
We make sure to consider the corresponding parts of the definition denoted by the bullet points $\bullet$.\\

Let $\A, \B$ be two categories. A \emph{functor} which we denote by $\Ff: \A \to \B$ is the following collection of maps, all denoted with the same symbol:
\begin{enumerate}
    \item A map between the objects of the two categories:
    $$
    \Ff: \ob(\A) \to \ob(\B)
    $$
    \item For all $X,Y \in \ob(\A)$ we have a map between morphisms: 
    \begin{itemize}
        \item \emph{In the case of a covariant functor} $$\Ff: \mor_\A(X,Y) \to \mor_\B(\Ff(X), \Ff(Y))$$
        \item \emph{In the case of a contravariant functor} $$\Ff: \mor_\A(X,Y) \to \mor_\B(\Ff(Y), \Ff(X))$$
    \end{itemize}
\end{enumerate}
A functor must also satisfy
\begin{equation}
\label{eq:functor_functoriality_identity}
\Ff(e_X) = e_{\Ff(X)},
\end{equation}
where $e_X$ denotes the identity morphism. And for every $f \in \mor_\A(X,Y)$ and $g \in \mor_\A(Y,Z)$
\begin{itemize}
    \item \emph{In the case of a covariant functor}
    \begin{equation}
    \label{eq:functor_functoriality_covar}
    \Ff(g \circ f) = \Ff(g) \circ \Ff(f)
    \end{equation}
    
    \item \emph{In the case of a contravariant functor}
    \begin{equation}
    \label{eq:functor_functoriality_contravar}
    \Ff(g \circ f) = \Ff(f) \circ \Ff(g)
    \end{equation}
\end{itemize}
A covariant functor is sometimes also simply called a functor.
\end{definition}

The additional requirements \eqref{eq:functor_functoriality_identity} and \eqref{eq:functor_functoriality_covar} respectively \eqref{eq:functor_functoriality_contravar} are sometimes referred to as \emph{functoriality} also outside of category theory.

Similar to functions we can also compose functors. We will use this to construct particular functors later on.

\begin{defprop}{\cite[Section~1.3.1]{Roman2017}}{composition_of_functors}
Let $\A, \B, \C$ be three categories and
$$
\Ff: \A \to \B, \quad \mathfrak{G}: \B \to \C
$$
two co- or contra- variant functors. Then $\mathfrak{G}$ and $\Ff$ can be composed in the obvious sense denoted by
$$\mathfrak{G} \Ff: \A \to \C$$
which is still a functor. Particularly $\mathfrak{G} \Ff$ is covariant if and only if both $\mathfrak{G}$ and $\Ff$ have the same type. Moreover, the composition of functors is associative.
\end{defprop}
\begin{proofidea}
Simply apply the definition of a functor.
\end{proofidea}

\subsection{Examples of Functors}

Here we have a few functors from different areas of mathematics, namely linear algebra and algebraic topology.

\begin{example}{The Adjoint Functor \source[?]}{}
Consider the category $\mathrm{Vec}_\mathbb{K}$. Then we can define the contravariant functor
$$
^* : \mathrm{Vec}_\mathbb{K} \to \mathrm{Vec}_\mathbb{K}
$$
which maps a vector space $V$ to its (algebraic) dual $V^*$ and maps a linear map $f: V \to W$ to its adjoint map $f^*: W^* \to V^*$. In particular this functor is contravariant since it \emph{flips the direction} of the morphisms.
\end{example}

From algebraic topology there are also examples of functors.
\begin{example}{Fundamental Group Functor \cite[Chapter~1]{Hatcher2001}}{}
The map that assigns a based topological $(X,x_0)$ space to its fundamental group $\pi_1(X,x_0)$ and assigns continuous functions $f: (X,x_0) \to (Y,y_0)$ to the group homomorphism 
$$
\pi_1(X,x_0) \ni [\alpha] \mapsto [f \circ \alpha] \in \pi_1(Y,y_0)
$$
is a functor
$$
\pi: \mathrm{Top}_\bullet \to \mathrm{Grp}.
$$
\end{example}

\begin{example}{Homology Functor \cite[Chapter~2.3]{Hatcher2001}}{}
The map that assigns a topological space $X$ to its singular homology chain complex $H_\bullet(X)$ and assigns continuous functions $f: X \to Y$ to the chain map $f_*: H_\bullet(X) \to H_\bullet(Y)$ is a functor from the category of topological spaces to the category of chain complexes of abelian groups.
\end{example}

Building on the definition of the category $\mathcal{G}$ \ref{exa:group-category}. We can now translate the familiar concept of a group homomorphism into a functor between categories.

\begin{example}{Group Homomorphism as a Functor}{}
Let $G_1, G_2$ be groups, $\phi: G_1 \to G_2$ be a group homomorphism and $\mathcal{G}_1,\mathcal{G}_2$ the corresponding categories \ref{exa:group-category}. The goal is to construct a corresponding functor 
$$
\Ff_\phi: \mathcal{G}_1 \to \mathcal{G}_1
$$
Since both $\mathcal{G}_1$ and $\mathcal{G}_2$ contain a single object $\epsilon$ it is clear that $\Ff_\phi(\epsilon) = \epsilon$. We still need to define the $\Ff$ on the morphisms, for which we simply set
$$
\Ff_\phi(g) = \phi(g) \in \mor_{\mathcal{G}_2}(\epsilon, \epsilon) = G_2
$$
for every $g \in \mor_{\mathcal{G}_1}(\epsilon, \epsilon) = G_1$. \par

\medskip It remains to check that this is indeed a functor:
\begin{equation*}
\begin{split}
\Ff_\phi(g \circ h) &= \phi(g \circ h) = \phi(g)\phi(h) \\
&= \phi(g) \circ \phi(h) = \Ff_\phi(g) \circ \Ff_\phi(h)
\end{split}
\end{equation*}
and since group homomorphisms map the neutral element to the neutral element we get
\begin{equation*}
\Ff_\phi(e_{G_1}) = \phi(e_{G_1}) = e_{G_2}.
\end{equation*}
\end{example}

\subsection{Forgetful Functor}
The \emph{forgetful functor} will later be used in the definition of clustering functors.

\begin{definition}{\cite[Chapter~1~Example~10]{Roman2017}}{}
Let $\C$ be a category whose objects are sets (potentially with some additional structure) and whose morphisms are certain maps between these sets.

Then we can define the forgetful functor
$$
\alpha_\C: \C \to \C_\mathrm{set}
$$
where $\alpha_\C$ maps objects to their underlying set. And morphisms get mapped to their underlying functions. In this sense the forgetful functor \emph{forgets} the additional structure of the category.
\end{definition}

In particular, we will use the following notation related to the forgetful functor.

\begin{notation}{}{factorizing_forgetful_functor}
Let $\A, \B$ be categories with forgetful functors $\alpha_\A, \alpha_\B$ respectively. We say that a functor $\Ff: \A \to \B$ \emph{factorizes the forgetful functor} if
\begin{equation*}
    \Ff \circ \alpha_\B = \alpha_\A.
\end{equation*}
This means that $\Ff$ preserves the underlying map of morphisms.
\end{notation}

\medskip We now have all the required tools to define clustering functors in the next chapters.